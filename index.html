<html lang="ko">
  <head>
    <meta charset-"UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title> 빛의 굴절 시뮬레이션  </title>
    <h2> 매질을 선택하세요 </h2>
    <link rel="stylesheet" href="style.css">
  </head>
  <body>
    <div class="button-container">
      
      <button class="dia-btn"> 다이아몬드 </button>
      <button class="wat-btn"> 물 </button>
      <button class="gla-btn"> 유리 </button>
    </div>
    <canvas id="canva"></canvas>

    <!--자바스크립트코드시자규ㅠ-->
    <script)
      const canva = document.getElementById('canva');
      const ctx=canva.getContext('2d');
      canva.width = window.innerWidth;   // 너비 = 화면 너비
      canva.height = window.innerHeight; //높이=화면높이

    // ===== 매질별 속성 정의 =====
    // 각 매질의 굴절률,배경색 저장
    const mediums = {
      dia: { 
        name: '다이아몬드',           // 매질 이름
        refractiveIndex: 2.42,        // 굴절률 (빛이 꺾이는 정도)
        color: '#e0ffff'              // 배경색 (연한 하늘색)
      },
      wat: { 
        name: '물', 
        refractiveIndex: 1.33,        // 물의 굴절률
        color: '#4facfe'              // 배경색 (하늘색)
      },
      gla: { 
        name: '유리', 
        refractiveIndex: 1.52,        // 유리의 굴절률
        color: '#fafad2'              // 배경색 (연두색)
      }
    };

    let currentMedium = 'water';  // 현재 선택된 매질 

    // 매질변경
    function changeMedium(medium) {
      currentMedium = medium;
      
      // 모든 버튼에서 'active' 클래스 제거 (선택 표시 제거)
      document.querySelectorAll('.medium-btn').forEach(btn => {
        btn.classList.remove('active');
      });
      
      // 클릭된 버튼에만 'active' 클래스 추가 (선택 표시)
      event.target.classList.add('active');
      
      // 화면 다시 그리기
      draw();
    }

    //화면그리기함수
    function draw() {
      // 캔버스 전체를 지워서 초기화
      ctx.clearRect(0, 0, canva.width, canva.height);

      //화며ㅛㄴ2등분
      const middleY = canva.height / 2;

      //위는고익
      ctx.fillStyle = '#ffffff';  // 흰색으로 설정
      ctx.fillRect(0, 0, canva.width, middleY);  // 사각형 그리기 (x, y, 너비, 높이)

      // ----- 아래쪽 절반: 선택된 매질 영역 그리기 -----
      ctx.fillStyle = mediums[currentMedium].color;  // 매질의 색상으로 설정
      ctx.fillRect(0, middleY, canva.width, canva.height - middleY);  // 사각형 그리기

      // ----- 경계선 그리기 (공기와 매질 사이) -----
      ctx.strokeStyle = '#333';      // 검은색 선
      ctx.lineWidth = 2;             // 선 두께 2px
      ctx.setLineDash([10, 5]);      // 점선 패턴 (10px 그리고 5px 비우기)
      ctx.beginPath();               // 새로운 경로 시작
      ctx.moveTo(0, middleY);        // 시작점 (왼쪽 끝)
      ctx.lineTo(canva.width, middleY);  // 끝점 (오른쪽 끝)
      ctx.stroke();                  // 선 그리기
      ctx.setLineDash([]);           // 점선 패턴 해제 (다시 실선으로)

      // ----- 매질 이름과 굴절률 표시 -----
      ctx.fillStyle = '#333';        // 글자색 검은색
      ctx.font = 'bold 24px Malgun Gothic';  // 글꼴 설정

      // 공기 정보 표시 (위쪽)
      ctx.fillText('공기 (n=1.00)', 20, middleY - 20);
      
      // 선택된 매질 정보 표시 (아래쪽)
      ctx.fillText(
        `${mediums[currentMedium].name} (n=${mediums[currentMedium].refractiveIndex})`, 
        20, 
        middleY + 40
      );
    }

    // ===== 화면 크기 변경 이벤트 =====
    // 브라우저 창 크기가 바뀔 때마다 실행
    window.addEventListener('resize', () => {
      canva.width = window.innerWidth;   // 캔버스 너비 재조정
      canva.height = window.innerHeight; // 캔버스 높이 재조정
      draw();  // 화면 다시 그리기
    });

      draw();
    </script>
  </body>
</html>

